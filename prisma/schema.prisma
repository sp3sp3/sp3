// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Project {
  id          Int          @id @default(autoincrement())
  name        String
  parentId    Int?
  parent      Project?     @relation("ParentChild", fields: [parentId], references: [id])
  children    Project[]    @relation("ParentChild")
  experiments Experiment[]
  image       Bytes?
}

model Experiment {
  id       Int                 @id @default(autoincrement())
  name     String
  parentId Int
  parent   Project             @relation(fields: [parentId], references: [id])
  // reagents ExperimentReagent[] 
}

// model ExperimentReagent {
//   id           Int             @id @default(autoincrement())
//   experimentId Int
//   experiment   Experiment      @relation(fields: [experimentId], references: [id])
//   locationId   Int
//   location     ReagentLocation @relation(fields: [locationId], references: [id])
//   // canonicalSMILES
//   name         String?
//   equivalents  Float
// }

// sqlite does not have enums
// make a separate table that holds the valid locations
// add the valid locations in a migration
// model ReagentLocation {
//   id       Int                 @id @default(autoincrement())
//   location String
//   reagents ExperimentReagent[] 
// }
